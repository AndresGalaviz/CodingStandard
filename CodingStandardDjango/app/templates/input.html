{% extends 'base.html' %}
{% block content %}
<!-- Forma para el grading criteria -->
<div class="container">
    <div class="row">
        <form action="{% url "input" %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
            <div class="col s8 offset-s2">
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">attachment </i>
                        {{ form.filename }}
                        <label class="active" for="filename">{{ form.filename.label }}</label>
                    </div>  
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">label</i>
                        {{ form.variables }}
                        <label class="active" for="variables">{{ form.variables.label }}</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">reorder</i>
                        {{ form.indentation }}
                        <label class="active" for="identation">{{ form.indentation.label }}</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">description</i>
                        {{ form.documentation }}
                        <label class="active" for="documentation">{{ form.documentation.label }}</label>
                    </div>
                </div>
                <div class="row">
                    <div class="file-field input-field">
                        <div class="btn">
                            <i class="material-icons left">folder</i>
                            <span>File</span>
                            {{ form.docfile }}
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text" placeholder="{{ form.docfile.label }}">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="right-align">
                        <a id="analyze" class="waves-effect waves-light btn" type="submit">Analizar</a>
                    </div>
                </div>
                <div class="row">
                    <p id="error"></p>
                    <p>{{ form.non_field_errors }}</p>
                    <p>{{ form.docfile.errors }}</p>
                </div>
            </div>
        </form>
    </div>
</div>
<script>
    $( "input" ).keyup(function() {
        displayVals()
    }).keyup();
    
    function displayVals() {
      var filename = parseInt($('#filename').val());
      var variables = parseInt($('#variables').val());
      var indentation = parseInt($('#indentation').val());
      var documentation = parseInt($('#documentation').val());

      var check = !$.isNumeric(filename) || !$.isNumeric(variables) || !$.isNumeric(indentation) || !$.isNumeric(documentation);
      var total = filename + variables + indentation + documentation;
      if(check) {
        $('#error').html('Todos los campos deben tener valores');
      }
      else if(total != 100) {
        $('#error').html('Los campos deben sumar 100');
      }
      else {
        $('#error').html('El criterio es v√°lido');
      }
    }
    displayVals();
</script>
{% endblock %}