{% extends 'base.html' %}
{% block content %}
<!-- Forma para el grading criteria -->
<div class="container">
    <div class="row">
        <form action="{% url "input" %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
            <div class="col s8 offset-s2">
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">attachment</i>
                        <input id="filename" type="number" class="validate">
                        <label class="active" for="filename">Nombre de archivo</label>
                    </div>  
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">label</i>
                        <input id="variables" type="number" class="validate">
                        <label class="active" for="variables">Nombres de variable</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">reorder</i>
                        <input id="indentation" type="number" class="validate">
                        <label class="active" for="identation">Indentación</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <i class="material-icons prefix">description</i>
                        <input id="documentation" type="number" class="validate">
                        <label class="active" for="documentation">Documentación</label>
                    </div>
                </div>
                <div class="row">
                    <div class="file-field input-field">
                        <div class="btn">
                            <i class="material-icons left">folder</i>
                            <span>File</span>
                            <input type="file" accept=".cpp" multiple>
                        </div>
                        <div class="file-path-wrapper">
                            <input class="file-path validate" type="text" placeholder="Upload one or more files">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <p>{{ form.non_field_errors }}</p>

                    <p>{{ form.docfile.label_tag }}</p>

                    <p>
                        {{ form.docfile.errors }}
                        {{ form.docfile }}
                    </p>
                </div>
                <div class="row">
                    <div class="right-align">
                        <a id="analyze" class="waves-effect waves-light btn" type="submit">Analizar</a>
                    </div>
                </div>
                <div class="row">
                    <p id="error"></p>
                </div>
            </div>
        </form>
    </div>
</div>
<script>
    $( "input" ).keyup(function() {
        displayVals()
    }).keyup();
    
    function displayVals() {
      var filename = parseInt($('#filename').val());
      var variables = parseInt($('#variables').val());
      var indentation = parseInt($('#indentation').val());
      var documentation = parseInt($('#documentation').val());

      var check = !$.isNumeric(filename) || !$.isNumeric(variables) || !$.isNumeric(indentation) || !$.isNumeric(documentation);
      var total = filename + variables + indentation + documentation;
      if(check) {
        $('#error').html('Todos los campos deben tener valores');
      }
      else if(total != 100) {
        $('#error').html('Los campos deben sumar 100');
      }
      else {
        $('#error').html('El criterio es válido');
      }
    }
    displayVals();
</script>
{% endblock %}